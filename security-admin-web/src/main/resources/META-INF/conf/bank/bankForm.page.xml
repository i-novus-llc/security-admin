<?xml version='1.0' encoding='UTF-8'?>
<simple-page xmlns="http://n2oapp.net/framework/config/schema/page-2.0" name="Добавление сведений о банке">
    <form query-id="${sec.admin.bank.query.id}">
        <fields>
            <row>
                <input-select id="parent"  label="Головная организация"
                              query-id="${sec.admin.bank.query.id}"
                              value-field-id="id" label-field-id="shortName"/>
            </row>
            <input-text id="fullName" required="true"/>
            <input-text id="shortName" required="true"/>
            <row>
                <input-text id="regNum" domain="integer" min="0"/>
                <date-time id="regDt" format="DD.MM.YYYY"/>
            </row>

            <row>

                <input-text id="ogrn"  required="true">
                    <validations>
                        <condition id="ogrnValidation" severity="danger" on="ogrn">
                            <![CDATA[(function(){
                    if (typeof ogrn != 'undefined' && ogrn != null && ogrn != '') {
                        var regex = new RegExp('^([0-9]{13})$');
                        return regex.test(ogrn);
                    } else return true;
                    })()
                ]]>
                        </condition>
                    </validations>
                </input-text>

                <input-text id="bik"  required="true">
                    <validations>
                        <condition id="bikValidation" severity="danger" on="bik">
                            <![CDATA[(function(){
                    if (typeof bik != 'undefined' && bik != null && bik != '') {
                        var regex = new RegExp('^(04[0-9]{7})$');
                        return regex.test(bik);
                    } else return true;
                    })()
                ]]>
                        </condition>
                    </validations>
                </input-text>
            </row>
            <row>
                <input-text id="inn"  required="true">
                    <validations>
                        <condition id="innValidation" severity="danger" on="inn">
                            <![CDATA[(function(){
                    if (typeof inn != 'undefined' && inn != null && inn != '') {
                        var regex = new RegExp('^([0-9]{10})$');
                        return regex.test(inn);
                    } else return true;
                    })()
                ]]>
                        </condition>
                    </validations>
                </input-text>

                <input-text id="kpp"  required="true">
                    <validations>
                        <condition id="kppValidation" severity="danger" on="kpp">
                            <![CDATA[(function(){
                    if (typeof kpp != 'undefined' && kpp != null && kpp != '') {
                        var regex = new RegExp('^([0-9]{9})$');
                        return regex.test(kpp);
                    } else return true;
                    })()
                ]]>
                        </condition>
                    </validations>
                </input-text>

            </row>
            <input-text id="legalAddress" required="true"/>
            <input-text id="actualAddress">
                <dependencies>
                    <enabling on="isCoincidesAddress"><![CDATA[
               typeof isCoincidesAddress === 'undefined' || !isCoincidesAddress
                ]]></enabling>
                </dependencies>
            </input-text>
            <checkbox id="isCoincidesAddress" label="Совпадает с юридическим"/>
        </fields>
    </form>
</simple-page>
