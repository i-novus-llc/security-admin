<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0">
    <regions>
        <tabs place="single">
            <form query-id="${sec.admin.bank.query.id}" id="bank" name="Данные организации"
                  object-id="${sec.admin.bank.object.id}">
                <toolbar>
                    <button id="update" label="Изменить">
                        <open-page page-id="bankForm" detail-field-id="id" submit-operation-id="update"/>
                    </button>
                </toolbar>
                <fields>
                    <row>
                        <input-select id="bank" label="Головная организация"
                                      query-id="${sec.admin.bank.query.id}"
                                      value-field-id="id" label-field-id="shortName" enabled="false"/>
                    </row>
                    <row>
                        <input-text id="fullName" enabled="false"/>
                        <input-text id="regNum" enabled="false"/>
                    </row>
                    <row>
                        <input-text id="shortName" enabled="false"/>
                        <date-time id="regDt" format="DD.MM.YYYY" enabled="false"/>
                    </row>
                    <row>
                        <input-text id="legalAddress" enabled="false"/>
                        <input-text id="ogrn" enabled="false"/>
                        <input-text id="bik" enabled="false"/>
                    </row>
                    <row>
                        <input-text id="actualAddress" enabled="false"/>
                        <input-text id="inn" enabled="false"/>
                        <input-text id="kpp" enabled="false"/>
                    </row>
                    <checkbox id="isCoincidesAddress" label="Совпадает с юридическим" enabled="false"/>
                </fields>

            </form>
            <table name="Пользователи" query-id="employeeBank" id="users" depends-on="bank" master-field-id="id"
                   detail-field-id="bankId">
                <columns>
                    <column text-field-id="employeeName"/>
                    <column text-field-id="position"/>
                    <column text-field-id="email"/>
                    <column text-field-id="roleNames" label="Роли">
                        <list label-field-id="name"/>
                    </column>
                    <column text-field-id="isActive" label="Авторизован">
                        <checkbox/>
                    </column>

                </columns>
                <toolbar>
                    <button label="Добавить" model="filter" widget-id="bank">
                        <show-modal page-id="employeeCreateForm" submit-operation-id="create"  close-after-submit="true" object-id="employeeBank"
                                    upload="defaults"
                                    detail-field-id="bankId" route="/create">
                            <pre-fields>
                                <eq field-id="bankId" ref-model="filter"/>
                            </pre-fields>
                        </show-modal>
                    </button>
                </toolbar>
            </table>
        </tabs>
    </regions>
</page>
