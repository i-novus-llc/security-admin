<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-3.0"
      name="Изменение карточки пользователя" object-id="${access.user.object.id}">
    <regions>
        <form id="main" query-id="${access.user.query.id}" route="/">
            <pre-filters>
                <eq field-id="id" param="user_id"/>
            </pre-filters>
            <fields>
                <row>
                    <col size="4">
                        <input-text id="username" enabled="false">
                            <dependencies>
                                <requiring>!${access.email-as-username}</requiring>
                                <visibility>!${access.email-as-username}</visibility>
                            </dependencies>
                        </input-text>
                    </col>
                    <col size="4">
                        <input-text id="email" label="e-mail">
                            <dependencies>
                                <requiring>${access.user.email-required} || ${access.email-as-username}</requiring>
                                <enabling>!${access.email-as-username}</enabling>
                            </dependencies>
                            <validations white-list="emailValidation"/>
                        </input-text>
                    </col>
                </row>
                <row>
                    <col size="4">
                        <password id="password" label="Новый пароль"
                                  visible="${access.user.password.input}" eye="false">
                            <validations white-list="passwordLengthValidation,passwordLowerCaseValidation,passwordUpperCaseValidation,passwordDigitsValidation,passwordSpecialSymbolsValidation,passwordCorrectSymbolsValidation"/>
                        </password>
                    </col>
                    <col size="4">
                        <password id="passwordCheck" label="Подтвердить пароль"
                                  visible="${access.user.password.input}" eye="false">
                            <validations white-list="passwordCheckValidation"/>
                            <dependencies>
                                <enabling on="password">typeof password != 'undefined' &amp;&amp; password != null &amp;&amp;
                                    password != ''
                                </enabling>
                            </dependencies>
                        </password>
                    </col>
                </row>
                <row>
                    <col size="4">
                        <input-text id="surname" required="${access.user.surname.required}" length="100"/>
                    </col>
                    <col size="4">
                        <input-text id="name" required="${access.user.name.required}" length="100"/>
                    </col>
                    <col size="4">
                        <input-text id="patronymic" length="100"/>
                    </col>
                </row>
                <row>
                    <col size="4">
                        <masked-input id="snils" mask="999-999-999 99" visible="${access.user.snils-visible}">
                            <validations white-list="snilsValidation"/>
                        </masked-input>
                    </col>
                </row>
            </fields>
        </form>
        <line collapsible="false">
            <table id="accounts" query-id="account" depends-on="main" master-field-id="id"
                   detail-field-id="userId" name="Аккаунты">
                <columns>
                    <column text-field-id="name" label="Наименование"/>
                    <column text-field-id="roleNames" label="Роли"/>
                    <!--                    <column text-field-id="actions" label=" ">-->
                    <!--                        <toolbar>-->
                    <!--                            <button id="delete" label="Удалить" type="icon" icon="fa fa-trash">-->
                    <!--                                <invoke operation-id="delete"/>-->
                    <!--                            </button>-->
                    <!--                        </toolbar>-->
                    <!--                    </column>-->
                </columns>
                <!--                <rows>-->
                <!--                    <click>-->
                <!--                        <open-page page-id="accountUpdateForm" submit-operation-id="update" route="/:code/update"-->
                <!--                                   object-id="account"-->
                <!--                                   detail-field-id="id">-->
                <!--                            <path-param name="code" value="{id}"/>-->
                <!--                        </open-page>-->
                <!--                    </click>-->
                <!--                </rows>-->
                <!--                <toolbar>-->
                <!--                    <button id="createAccount" label="Создать" disable-on-empty-model="false">-->
                <!--                        <open-page page-id="accountForm" submit-operation-id="create"-->
                <!--                                   object-id="account" upload="defaults" route="/create" close-after-submit="true">-->
                <!--                        </open-page>-->
                <!--                    </button>-->
                <!--                </toolbar>-->
            </table>
        </line>
    </regions>

</page>
