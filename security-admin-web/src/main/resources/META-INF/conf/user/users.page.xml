<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0"
      xmlns:ctrl="http://n2oapp.net/framework/config/schema/n2o-control-1.0" name="Пользователи">
    <regions>
        <none place="single">
            <table name="Пользователи" query-id="${sec.admin.user.query.id}">
                <columns>
                    <column text-field-id="username"/>
                    <column text-field-id="fio"/>
                    <column text-field-id="isActive">
                        <checkbox>
                            <invoke route="/changeUserActive" action-id="changeUserActive"/>
                        </checkbox>
                    </column>
                     <column text-field-id="roleNames" label="Роли">
                         <list label-field-id="name"/>
                     </column>
                </columns>
                <filters>
                    <row>
                        <ctrl:input-text id="username"/>
                        <ctrl:input-text id="fio" css-class="n2o-control-10"/>
                        <!-- <ctrl:checkbox-group id="activeList" label="Активность" inline="true" css-class="n2o-control-4">
                             <ctrl:options>
                                 <ctrl:option>{"id" : "true", "name" :"Да"}</ctrl:option>
                                 <ctrl:option>{"id" : "false", "name" :"Нет"}</ctrl:option>
                             </ctrl:options>
                         </ctrl:checkbox-group>

                         <ctrl:hidden id="isActive">
                             <ctrl:set-value-expression on="activeList">
                                 if ((typeof activeList == 'undefined') || (activeList == null) ||
                                 (activeList.length==0))
                                 null;
                                 else if (activeList.length ==2)
                                 null;
                                 else if (activeList[0].id == 'true')
                                 true;
                                 else false;
                             </ctrl:set-value-expression>
                         </ctrl:hidden>-->

                        <!--<ctrl:input-select id="roles" type="single" label="Роли">-->
                            <!--<ctrl:query query-id="${sec.admin.role.query.id}" value-field-id="id"-->
                                        <!--label-field-id="name"/>-->
                        <!--</ctrl:input-select>-->
                    </row>
                </filters>
                <toolbar>
                    <button id="create" label="Создать">
                        <show-modal page-id="userForm" submit-operation-id="create" model="filter" object-id="user"/>
                    </button>
                    <button id="update" context="true" label="Изменить">
                        <show-modal page-id="userUpdateForm"  submit-operation-id="update" object-id="user"/>
                    </button>
                    <button id="delete" label="Удалить">
                        <invoke operation-id="delete"/>
                    </button>

                </toolbar>
            </table>
        </none>
    </regions>
</page>
