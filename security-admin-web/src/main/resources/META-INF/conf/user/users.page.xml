<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0"
      object-id="${access.user.object.id}"
      name="Пользователи">
    <regions>
        <region place="single">
            <table name="Пользователи" query-id="${access.user.query.id}">
                <columns>
                    <column text-field-id="username"/>
                    <column text-field-id="fio"/>
                    <column text-field-id="isActive">
                        <checkbox>
                            <invoke route="/changeUserActive" operation-id="changeUserActive"/>
                        </checkbox>
                    </column>
                    <column text-field-id="roleNames" label="Роли">
                        <list label-field-id="name"/>
                    </column>
                </columns>
                <filters>
                    <row>
                        <input-text id="username"/>
                        <input-text id="fio" class="n2o-control-10"/>
                        <!-- <ctrl:checkbox-group id="activeList" label="Активность" inline="true" css-class="n2o-control-4">
                             <ctrl:options>
                                 <ctrl:option>{"id" : "true", "name" :"Да"}</ctrl:option>
                                 <ctrl:option>{"id" : "false", "name" :"Нет"}</ctrl:option>
                             </ctrl:options>
                         </ctrl:checkbox-group>

                         <ctrl:hidden id="isActive">
                             <ctrl:set-value-expression on="activeList">
                                 if ((typeof activeList == 'undefined') || (activeList == null) ||
                                 (activeList.length==0))
                                 null;
                                 else if (activeList.length ==2)
                                 null;
                                 else if (activeList[0].id == 'true')
                                 true;
                                 else false;
                             </ctrl:set-value-expression>
                         </ctrl:hidden>-->

                        <input-select id="roles" type="multi" label="Роли" visible="false"
                                      query-id="${access.role.query.id}" value-field-id="id"
                                      label-field-id="name">
                        </input-select>
                    </row>
                </filters>
                <toolbar>
                    <button id="create" label="Создать">
                        <show-modal page-id="userForm" submit-operation-id="create" model="filter" object-id="user" upload="defaults" route="create"/>
                    </button>
                    <button id="update" context="true" label="Изменить">
                        <show-modal page-id="userUpdateForm" submit-operation-id="update" object-id="user"
                                    detail-field-id="id" route="/:id/update"/>
                    </button>
                    <button id="delete" label="Удалить">
                        <invoke operation-id="delete"/>
                    </button>

                </toolbar>
            </table>
        </region>
    </regions>
</page>
